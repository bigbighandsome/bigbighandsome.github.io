import{u as T,b as q,D as G,i as k,e as i,J as H,f as K,r as f,o as x,g as b,j as n,h as a,w as t,F as j,a as o,x as O,t as A}from"./index-da111333.js";import{_ as Q}from"./LoginModal-05199798.js";const W={class:"p-2"},X=n("thead",null,[n("tr",null,[n("th",null,"编号"),n("th",null,"名称"),n("th",null,"操作")])],-1),ae={__name:"CategoryAdmin",setup(Y){T(),q(),G();const g=k("axios"),u=k("message"),U=k("loadingBar"),m=i(!0),N=i([]),r=i(""),c=i(""),v=i(!1),p=i(!1),_=i(!1),D=i(0),L=i(0);H(()=>{}),K(()=>{w()});const w=async()=>{U.start();let e=await g.get("/category/list");console.log(e.data),e.data.code==200&&(N.value=e.data.data),U.finish()},B=e=>{L.value=e,_.value=!0},$=()=>{_.value=!1,c.value=""},z=async()=>{if(c.value.trim()==""){u.warning("不能为空");return}let e=await g.put("/category/_token/update",{id:L.value,name:c.value});console.log(e),e.data.code==200?(u.success(e.data.msg),w()):e.data.msg=="请先登录"?(m.value.showLoginModal=!0,u.info(e.data.msg)):u.warning(e.data.msg),_.value=!1,c.value=""},P=e=>{D.value=e,p.value=!0},V=()=>{p.value=!1},E=async()=>{let e=await g.delete(`/category/_token/delete?id=${D.value}`);console.log(e),e.data.code==200?(u.success(e.data.msg),w()):e.data.msg=="请先登录"?(m.value.showLoginModal=!0,u.info(e.data.msg)):u.warning(e.data.msg),p.value=!1},F=()=>{v.value=!0},I=()=>{v.value=!1,r.value=""},R=async()=>{if(r.value.trim()==""){u.warning("不能为空",{duration:600});return}let e=await g.post("/category/_token/add",{name:r.value});e.data.code===200&&w(),u.info(e.data.msg),e.data.msg=="请先登录"&&(m.value.showLoginModal=!0),v.value=!1,r.value=""};return(e,s)=>{const d=f("n-button"),y=f("n-space"),S=f("n-table"),M=f("n-input"),h=f("n-card"),C=f("n-modal");return x(),b(j,null,[n("div",W,[a(d,{onClick:F},{default:t(()=>[o("添加")]),_:1}),a(S,{bordered:!1,"single-line":!1},{default:t(()=>[X,n("tbody",null,[(x(!0),b(j,null,O(N.value,(l,Z)=>(x(),b("tr",null,[n("td",null,A(l.id),1),n("td",null,A(l.name),1),n("td",null,[a(y,null,{default:t(()=>[a(d,{onClick:J=>B(l.id)},{default:t(()=>[o("修改")]),_:2},1032,["onClick"]),a(d,{onClick:J=>P(l.id)},{default:t(()=>[o("删除")]),_:2},1032,["onClick"])]),_:2},1024)])]))),256))])]),_:1})]),a(C,{show:_.value,"onUpdate:show":s[1]||(s[1]=l=>_.value=l)},{default:t(()=>[a(h,{style:{width:"400px"},title:"更新分类",bordered:!1,size:"huge",preset:"card","aria-modal":"true"},{"header-extra":t(()=>[]),footer:t(()=>[a(y,{justify:"space-between"},{default:t(()=>[a(d,{type:"info",onClick:$},{default:t(()=>[o("取消")]),_:1}),a(d,{type:"success",onClick:z},{default:t(()=>[o(" 更新 ")]),_:1})]),_:1})]),default:t(()=>[a(M,{value:c.value,"onUpdate:value":s[0]||(s[0]=l=>c.value=l),placeholder:"输入更新的分类名称"},null,8,["value"])]),_:1})]),_:1},8,["show"]),a(C,{show:v.value,"onUpdate:show":s[3]||(s[3]=l=>v.value=l)},{default:t(()=>[a(h,{style:{width:"400px"},title:"添加分类",bordered:!1,size:"huge",preset:"card","aria-modal":"true"},{"header-extra":t(()=>[]),footer:t(()=>[a(y,{justify:"space-between"},{default:t(()=>[a(d,{type:"info",onClick:I},{default:t(()=>[o("取消")]),_:1}),a(d,{type:"success",onClick:R},{default:t(()=>[o("添加")]),_:1})]),_:1})]),default:t(()=>[a(M,{value:r.value,"onUpdate:value":s[2]||(s[2]=l=>r.value=l),placeholder:"输入添加的分类名称"},null,8,["value"])]),_:1})]),_:1},8,["show"]),a(C,{show:p.value,"onUpdate:show":s[4]||(s[4]=l=>p.value=l)},{default:t(()=>[a(h,{style:{width:"400px"},title:"删除分类",bordered:!1,size:"huge",preset:"card","aria-modal":"true"},{"header-extra":t(()=>[o("港真？")]),footer:t(()=>[a(y,{justify:"space-between"},{default:t(()=>[a(d,{type:"info",onClick:V},{default:t(()=>[o("点错了")]),_:1}),a(d,{type:"success",onClick:E},{default:t(()=>[o(" 点对了 ")]),_:1})]),_:1})]),default:t(()=>[o(" 确认删除这个分类吗？ ")]),_:1})]),_:1},8,["show"]),a(Q,{ref_key:"refLoginModal",ref:m},null,512)],64)}}};export{ae as default};
